@import "tailwindcss";

@plugin "tailwindcss-animate";

@custom-variant dark (&:is(.dark *));

@theme {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-border: var(--border);
  --color-primary: var(--primary);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --spacing-sidebar: var(--sidebar-width);
  --spacing-sidebar-icon: var(--sidebar-width-icon);
}

:root {
  --background: #ffffff;
  --foreground: #09090b;
  --primary: #18181b;
  --border: #e4e4e7;

  /* Sidebar - Gris muy suave para que se note el borde */
  --sidebar-background: #fafafa;
  --sidebar-foreground: #18181b;

  /* ESTADO ACTIVO/SELECCIONADO */
  --sidebar-accent: #ffffff;            /* Fondo blanco cuando se selecciona */
  --sidebar-accent-foreground: #09090b; /* Texto casi negro para que resalte */

  --popover: #ffffff;            /* Fondo del globo: Blanco */
  --popover-foreground: #09090b; /* Texto del globo: Negro/Oscuro */
  
  --sidebar-border: #e4e4e7;

  /* Medidas */
  --sidebar-width: 260px;
  --sidebar-width-icon: 64px;
}

@layer base {
  body {
    background-color: var(--background);
    color: var(--foreground);
  }
}

/* --- FIX DE ANIMACIÓN Y POSICIÓN --- */

@media (min-width: 768px) {
  /* 1. Sincronizamos el "Ghost Div" y el "Visual Div" de la Sidebar */
  
  /* Cuando la sidebar está COLAPSADA (data-state=collapsed) */
  .group\/sidebar-wrapper:has([data-state=collapsed]) aside,
  .group\/sidebar-wrapper:has([data-state=collapsed]) [data-sidebar="sidebar"] {
    width: var(--sidebar-width-icon) !important;
  }

  /* Cuando la sidebar está EXPANDIDA (data-state=expanded) */
  .group\/sidebar-wrapper:has([data-state=expanded]) aside,
  .group\/sidebar-wrapper:has([data-state=expanded]) [data-sidebar="sidebar"] {
    width: var(--sidebar-width) !important;
  }

  /* 2. Sincronizamos el margen del MAIN (SidebarInset) */
  .group\/sidebar-wrapper:has([data-state=collapsed]) [data-inset] {
    margin-left: var(--sidebar-width-icon) !important;
  }

  .group\/sidebar-wrapper:has([data-state=expanded]) [data-inset] {
    margin-left: var(--sidebar-width) !important;
  }

  /* 3. Transiciones suaves para TODO */
  aside, 
  [data-sidebar="sidebar"],
  [data-inset] {
    transition: width 0.2s ease-in-out, margin-left 0.2s ease-in-out !important;
  }

  /* Estilo específico para los tooltips de la sidebar */
[data-side=right], [data-side=left], [data-side=top], [data-side=bottom] {
  @media (min-width: 768px) {
    background-color: var(--popover) !important;
    color: var(--popover-foreground) !important;
    border: 1px solid var(--border) !important;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1) !important;
    border-radius: 0.375rem !important;
    font-size: 0.75rem !important;
    font-weight: 500 !important;
  }
}
}